@using Microsoft.AspNetCore.Http
@model KalustoLuetteloSovellus.Models.Käyttäjä
@{
    ViewData["Title"] = "User";
}

<h1>Omat sivut</h1>


<br />
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Käyttäjätunnus</th>
            <th>Rooli</th>
            <th>Tapahtumia</th>
            <th>Palauttamattomia</th>
            <th>Toiminnot</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>@Model.Käyttäjätunnus</td>
            <td>@Model.Rooli.RooliNimi</td>
            <td>@Model.Tapahtumat.Count()kpl</td>
            <td>@Model.Tapahtumat.Where(t => t.Tuote.Status.StatusNimi != "Vapaa" && RoleHelper.IsUser(t.KäyttäjäId,Context)).Count()kpl (tämä ei ihan toimi oikein)</td>
            <td><a class="btn btn-main" asp-controller="Home" onclick="return confirm('Haluatko varmasti poistaa tilin?')" asp-action="DeleteAccount" asp-route-käyttäjäId="@Model.KäyttäjäId"><i class="fas fa-trash"></i> Poista tili</a></td>
        </tr>
    </tbody>
</table>

<h5>Käyttäjän luomat tapahtumat</h5>
@await Html.PartialAsync("_TapahtumaRivitPartial", Model.Tapahtumat)
