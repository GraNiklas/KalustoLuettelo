@model IEnumerable<KalustoLuetteloSovellus.Models.Tuote>

@{
    ViewData["Title"] = "Index";
}
<style>
    /* nää vois laittaa omaan tiedostoon sitten jossain kohtaa */
    .darkMode{
        color: rgb(200,200,200);
        background-color: rgb(10,10,10);
    }
    .carousel-container {
        display: flex;
        align-items: center;
        width: 100%;
        margin: auto;
    }

    .carousel-view {
        overflow: hidden;
        width: 900px; /* 3 items * 300px width */
        height: 100%;
    }

    .carousel-track {
        display: flex;
        height:100%;
        flex-wrap:nowrap;
        transition: transform 0.3s ease-in-out;
    }

    .carousel-item {
        width: 500px;
        height: 100%;
        display:block;
        flex-shrink: 0;
        text-align: center;
        padding: 10px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        margin: 0 5px;
    }
</style>


<h1>Tuotteet</h1>

<p>
    <a class="btn btn-success" asp-action="Create"><i class="fas fa-add"></i>Lisää uusi</a>
</p>
<div class="carousel-container">
    <button class="btn btn-secondary" id="btnLeft" style="flex-grow:0;width:48px;height:48px;margin:auto"><i class="fas fa-arrow-left"></i></button>
    <div class="carousel-view">
        <div class="carousel-track" id="carouselTrack">
        @foreach (var item in Model)
        {
            @Html.Partial("_TuoteKorttiPartial", item)
        }
        </div>
    </div>
    <button class="btn btn-secondary" id="btnRight" style="flex-grow:0;width:48px;height:48px;margin:auto"><i class="fas fa-arrow-right"></i></button>
</div>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.IdNumero)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Kuvaus)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Kuva)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OstoPvm)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Hinta)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Takuu)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Aktiivinen)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Kategoria)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Toimipiste)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.IdNumero)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Kuvaus)
            </td>
            <td>
                @if (item.Kuva != null && item.Kuva.Length > 0)
                {
                    <img class="" style="width:25px;height:25px;object-fit:cover" src="data:image/jpeg;base64,@Convert.ToBase64String(item.Kuva)" alt="Tuote kuva" />
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OstoPvm)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Hinta)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Takuu)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Aktiivinen)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Kategoria.KategoriaNimi)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status.StatusNimi)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Toimipiste.ToimipisteNimi)
            </td>
            <td>
                <a class="btn btn-primary" asp-action="Edit" asp-route-id="@item.TuoteId"><i class="fas fa-edit"></i></a>
                <a class="btn btn-secondary" asp-action="Details" asp-route-id="@item.TuoteId"><i class="fas fa-search"></i></a>
                <a class="btn btn-danger" asp-action="Delete" asp-route-id="@item.TuoteId"><i class="fas fa-trash"></i></a>
            </td>
        </tr>
}
    </tbody>
</table>
<script>
    //Karuselli koodi
    window.onload = function(){
        // document.body.classList.add('darkMode');

        const track = document.getElementById('carouselTrack');
        const btnLeft = document.getElementById('btnLeft');
        const btnRight = document.getElementById('btnRight');

        const visibleCount = 2;
        let currentIndex = 0;

        const items = document.querySelectorAll('.carousel-item');

        const totalItems = items.length;

        function updateCarousel() {
            console.log(currentIndex)
            const offset = currentIndex * 500; // 500px item width * index
            track.style.transform = `translateX(-${offset}px)`;
        }

        btnRight.addEventListener('click', () => {
            if (currentIndex < totalItems - visibleCount) {
            currentIndex++;
            updateCarousel();
            }
        });

        btnLeft.addEventListener('click', () => {
            if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
            }
        });
    };
</script>
